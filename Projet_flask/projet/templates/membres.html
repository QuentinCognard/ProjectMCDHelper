{% extends "base_excerciseur.html" %}
{% block styles %}
{{ super() }}
  <link rel="stylesheet" href= "{{url_for('static',filename='accueil_projet.css') }}"/>

{% endblock %}
{% block contain %}
<div id="membres">
  <h4> Membres du projet : </h4></br>
  {% for membres in membresProj %}
    <p>{{ membres.user_login }}: {{ membres.droit.nomDroit }}</p>
  {% endfor %}
  {% if master == False%}
    </div>
    <div id=membres>
      <h3> Vous n'avez pas l'autorisation de supprimer, de modifier ou d'ajouter des membres. Demandez aux membres master d'effectuer les actions n√©cessaires.</h3>
    </div>
  {% else %}
    <a href="{{ url_for('add_membre',username=username,nomProj=nomProj)}}"><input type="Submit" value="Ajouter Membre"></a>
  </div>
    <div id="modif">
    <select id="select">
      {% for membre in membresProj %}
      <option onclick="droit('{{membre.droit.nomDroit|safe}}')" value="{{ membre.user_login }}">{{ membre.user_login }}</option>
      {% endfor %}
    </select>
    <select id="resultat">
        <option value="developpeur">developpeur</option>
        <option value="visiteur"> visiteur</option>
      </select>
      <script>
      function modifier(){
        var nom=document.getElementById("select").value
        var droit=document.getElementById("resultat").value
        var nomProj='{{ nomProj }}'
        console.log(nomProj)
        document.location.href="/projets/{{ current_user.login }}/"+nomProj+"/parametres/membres/modif/"+droit+"/"+nom
      }
      function supprimer(){
        var nom=document.getElementById("select").value
        var nomProj='{{ nomProj }}'
        document.location.href="/projets/{{ current_user.login }}/"+nomProj+"/parametres/membres/supprimer/"+nom
      }
      </script>
      <div id="input">
        <input type="Submit" value="Modifier" onclick="modifier()">
        <input type="Submit" value="Supprimer" onclick="supprimer()">
      </div>
  </div>
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <ul class=flashes>
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}
  {% endif %}

{% endblock %}
